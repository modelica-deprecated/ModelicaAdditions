<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>ModelicaAdditions</TITLE></HEAD>
<BODY><P>
<H2><A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops.html#ModelicaAdditions.MultiBody.Examples.Loops"
>ModelicaAdditions.MultiBody.Examples.Loops</A>.Utilities</H2>
<A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"
><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceI.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce" WIDTH=80  HEIGHT=80 ></A>
<A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine"
><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineI.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<HR>
<H2><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineI.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities"
>ModelicaAdditions.MultiBody.Examples.Loops.Utilities</A>.Engine</H2>
<IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.EngineD.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.Engine">
<H3>Information</H3>
<PRE>Use the following settings:

experiment StopTime=0.2 Interval=0.002 Tolerance=1.E-8


Perform 'simulate' and then see animation in
Animation window.

  Plot the following variables:

  AngVelDegS: Angular velocity of motor shaft [rev/min]
  x         : position of cylinder [m]
  press     : pressure in cylinder [bar]
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>D</TD><TD>0.1</TD><TD></TD></TR>
<TR><TD>e</TD><TD>0.05</TD><TD></TD></TR>
<TR><TD>L</TD><TD>0.2</TD><TD></TD></TR>
<TR><TD>Load</TD><TD>20</TD><TD></TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
partial model Engine
  extends <A HREF="../../modelica/help/Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  parameter Real D=0.1;
  parameter Real e=0.05;
  parameter Real L=0.2;
  parameter Real Load=20;
  constant Real PI=Modelica.Constants.pi;
  output Real AngVelDegS;
  output Real x;
  output Real press;
  output Real T;
  output Real V;
  output Real dens;
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.InertialSystem"
>MultiBody.Parts.InertialSystem</A> inertial(g=0);
  <A HREF="ModelicaAdditions_MultiBody_Joints.html#ModelicaAdditions.MultiBody.Joints.Revolute"
>MultiBody.Joints.Revolute</A> r1(startValueFixed=true, qd(start=-157));
  <A HREF="ModelicaAdditions_MultiBody_Joints.html#ModelicaAdditions.MultiBody.Joints.Prismatic"
>MultiBody.Joints.Prismatic</A> cyl(n={-1,0,0});
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.FrameTranslation"
>MultiBody.Parts.FrameTranslation</A> trans(r={sqrt((D/2 + L)^2 - e^2),-e,0});
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.ShapeBody"
>MultiBody.Parts.ShapeBody</A> piston(
    r={0.1,0,0},
    m=0.3,
    I33=0.0001,
    Shape=&quot;cylinder&quot;,
    Width=0.05,
    Height=0.05);
  <A HREF="ModelicaAdditions_MultiBody_Parts.html#ModelicaAdditions.MultiBody.Parts.ShapeBody"
>MultiBody.Parts.ShapeBody</A> crank(
    r={D/2,0,0},
    Width=0.01,
    Height=0.01,
    Material={0,0,1,0.5});
  <A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"
>MultiBody.Examples.Loops.Utilities.GasForce</A> gasForce(L=(sqrt((L + D/2)^2
         - e^2) - sqrt((L - D/2)^2 - e^2)), d=0.05);
  <A HREF="../../modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Inertia"
>Modelica.Mechanics.Rotational.Inertia</A> flyWheel(J=0.0025);
  <A HREF="../../modelica/help/Modelica_Mechanics_Rotational.html#Modelica.Mechanics.Rotational.Torque"
>Modelica.Mechanics.Rotational.Torque</A> torque;
equation
  connect(inertial.frame_b, r1.frame_a);
  connect(inertial.frame_b, trans.frame_a);
  connect(trans.frame_b, cyl.frame_a);
  connect(cyl.frame_b, piston.frame_a);
  connect(cyl.bearing, gasForce.flange_a);
  connect(cyl.axis, gasForce.flange_b);
  connect(flyWheel.flange_b, r1.axis);
  connect(torque.flange_b, flyWheel.flange_a);
  connect(r1.frame_b, crank.frame_a);
  torque.tau = (if r1.qd &gt; 0 then -1 else 1)*Load;
  <I></I>
  AngVelDegS = -r1.qd*60/(2*PI);
  <I>/*rev/min*/</I>
  <I></I>
  x = gasForce.s_rel;
  press = gasForce.press;
  T = gasForce.T;
  V = gasForce.V;
  dens = gasForce.dens;
end Engine;
</PRE>
<HR>
<H2><IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceI.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce"></A><A HREF="ModelicaAdditions_MultiBody_Examples_Loops_Utilities.html#ModelicaAdditions.MultiBody.Examples.Loops.Utilities"
>ModelicaAdditions.MultiBody.Examples.Loops.Utilities</A>.GasForce</H2>
<IMG SRC="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForceD.gif" ALT="ModelicaAdditions.MultiBody.Examples.Loops.Utilities.GasForce">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>L</TD><TD></TD><TD>Length of cylinder [m]</TD></TR>
<TR><TD>d</TD><TD></TD><TD>diameter of cylinder [m]</TD></TR>
<TR><TD>k0</TD><TD>0.01</TD><TD></TD></TR>
<TR><TD>k1</TD><TD>1</TD><TD></TD></TR>
<TR><TD>k</TD><TD>1</TD><TD></TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
model GasForce
  extends <A HREF="../../modelica/help/Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Compliant"
>Modelica.Mechanics.Translational.Interfaces.Compliant</A>;
  parameter SIunits.Length L &quot;Length of cylinder&quot;;
  parameter SIunits.Length d &quot;diameter of cylinder&quot;;
  parameter Real k0=0.01;
  parameter Real k1=1;
  parameter Real k=1;
  constant Real PI=3.14159265;
  SIunits.Position x;
  SIunits.Density dens;
  SIunits.Pressure press &quot;cylinder pressure&quot;;
  SIunits.Volume V;
  SIunits.Temperature T;
  SIunits.Velocity v_rel;
equation
  x = 1 - s_rel/L;
  v_rel = der(s_rel);
  <I></I>
  press = if v_rel &lt; 0 then (if x &lt; 0.987 then 177.4132*x^4 - 287.2189*x
    ^3 + 151.8252*x^2 - 24.9973*x + 2.4 else 2836360*x^4 - 10569296*x^3 +
    14761814*x^2 - 9158505*x + 2129670) else (if x &gt; 0.93 then -3929704*x^4
     + 14748765*x^3 - 20747000*x^2 + 12964477*x - 3036495 else 145.930*x^4 -
    131.707*x^3 + 17.3438*x^2 + 17.9272*x + 2.4);
  <I></I>
  f = -1.0E5*press*PI*d^2/4;
  <I></I>
  V = k0 + k1*(1 - x);
  dens = 1/V;
  press*V = k*T;
end GasForce;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Jun 20 22:21:19 2000
.
</address></BODY>
</HTML>
